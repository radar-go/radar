os: linux
language: go
go:
- "1.10"

services:
  - docker

before_install:
  - export GOROOT=$(go env GOROOT)

install:
  - go get github.com/golang/dep/cmd/dep
  - go get -u github.com/jstemmer/go-junit-report
  - go get -u github.com/valyala/quicktemplate
  - go get -u github.com/valyala/quicktemplate/qtc

script:
  - make update-vendors
  - echo $GOPATH
  - ls $GOPATH/*
  - make tests
  - make tests | tee /dev/tty | go-junit-report > junit-report.xml
